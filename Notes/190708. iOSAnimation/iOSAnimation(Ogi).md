#iOS Animation (190708 JK)

모든 비트맵은 픽셀의 갯수만큼 가지고 있다.
DIB형식은 디바이스의 형식과 상관없이 어떠한 디바이스에서도 사용할 수 있는 확장자이다.

흑백이 표현 가능한 색의 갯수 : 1byte * 256 * 256 

컬러가 표현 가능한 색의 갯수 : 3byte(3원색) * 256 * 256 

투명이 표현 가능한 색이 갯수 : 4byte * 256 * 256 
1픽셀을 사용하기 위한 4바이트를 지원한다.


RGB는 빛의 3원색이다. 섞을 수록 하얘지고
인쇄할 때는 CMYK를 사용한다. 물감그릴 때 색의 3원색을 섞으면 black이 된다.

맥 OS는 1사분면을 쓴다.
iOS는 4사분면을 쓴다. 4사분면은 마이너스인데 IOS는 4사분면에서 밑으로 내려갈수록 '+' 를 쓴다.(flipped) 
iOS는 좌상단이 원점이고 아래로 내려갈수록 값이 커진다.

#UIView Animation Curves

curve를 'bezier path'라고 부른다.
p1을 만들어 놓으면 control point라고 부른다.
bezier curve, path 점을 이어서 Animation의 경로를 만들어 놓는다. 

뷰를 만들기 위해서는 최소 origin 과 size가 있어야 한다.
center값을 정해주거나 바꾸면 origin과 size도 바뀐다.

alpha는 투명한지 안투명한지 (0.1보다 작은 값이면 view는 보이지 않는다. 투명도가 낮아지면 터치와 같은 event 처리도 해주지 않는다. )


#UIView Property

transform은 형태를 바꾸어 주는 것이다. 
모든 View들은 형식, 형태를 바꾸어 줄 수 있다.
어떤게 있는지 종류만 알고 있으면 된다. 값을 바꿀 수록 계속 다시 그려진다.
1. Identity : 어떤 형식을 넣었다가 identity를 해주면 원래 frame대로 돌아간다. 정보가 사라지지는 않지만 그냥 돌아가주는 역할.
2. scale: 크기를 키워줄 수 있다. 뷰를 
3. transition: 뷰들이 이동을 하는 것
4. rotate: 뷰가 회전하는 것.
center값(기준점)이 바뀌면 다른 정보들도 같이 바뀐다.


animation은 흔적이 남아야 animation이라고 한다. 속성을 바꾸는 것이기 때문에
값을 바꿀 수 있다.(가변)

#Display Link

애니메이션을 처리하는 곳인 Core Animation에서 한다.
내가 타이밍에 맞춰서 애니메이션을 직접적으로 하고 싶을 때 사용하는 기법.
animaion을 만드는게 생각보다 타이트한 일이다. 16줄을 넘기면 안된다는 제약도 있고, scoll을 할 때마다 다시 그려야 하는데, 이런 작업들이 많이 예민한 작업이다.
미리 무슨 작업을 해야할지 예상 작업을 해놓지 않으면 스크롤을 하고 애니메이션이 자연스럽게 나오지 않고, 버벅이면 안된다는 상황을 고려해야하기 때문에 애니메이션이 상당이 생각할게 많은 작업이다. 

#UIDynamicAnimator 

iOS 7.0부터 UIKit에 적용된 새로운 기술이다. 
UIView 요소에 대해 key Frame Animation 등으로 구현하기 힘든 자연스러운 움직임을 구현할 수 있게 해준다.
1. iOS 9 이하에서 대기화면을 위로 쓸어올려 카메라를 열 때, 올라간 뷰가 다시 떨어지는 애니메이션 (자유 낙하)
2. 위 예에서 떨어진 뷰가 화면 하단에 부딪히면서 통통 튀는 효과 (충돌, 자유 낙하)
3. 뷰가 자연스럽게 특정한 방향으로 가속하면서 밀리는 효과 (iOS9의 대기화면을 위로 밀어올리는 효과)
4. 뷰와 뷰가 마치 보이지 않는 스프링으로 연결된 것처럼 따라 움직이는 효과 (메시지 앱의 말풍선)
5. 뷰가 특정한 위치로 끌려가는 듯 한 효과

UIDynamic은 계산의 효율을 높이기 위해 동작의 종류를 가급적 줄이려고 한다. 예를 들면 특정 지점에 연결된 용수철 효과만이 고려되는 뷰에 대해 다른 뷰와의 충돌을 계산할 필요가 없듯 각각의 동작의 종류는 카테고리화 되고, 애니메이터는 각 카테고리별로 계산해야 할 항목이 다르다. 이런 것을 처리하기 위해 추상 클래스의 몇가지 서브 클래스들을 이용하여 푸시, 낙하, 충돌, 스냅, 연결 등의 효과를 정의해둔다. 때문에 대부분의 경우에는 이러한 효과들을 그대로 사용하면 되고, 별도의 behivior를 작성하는 일은 드물다고 볼 수 있다. 
하지만 UIDynamicItemBehavior의 서브클래스들은 자신이 정의하고 있는 동작에 영향을 받는 아이템들 생성시에 알고 있어야 한다. 이 아이템들은 UIDynamicItem이라는 프로토콜을 따르고 있어야 하는데, 이 프로토콜은 앞에서 말한 '크기, '위치', '각도' 등이 정의되어 있는 화면에 표시될 수 있는 요소이다. 기본적으로 UIView와 그 서브 클래스들은 이 프로토콜을 기본적으로 지원하고 있다. 이러한 효과를 사용하기 위해 각 뷰들이 어떠한 동작을 지원할 것인지를 결정하고 그에 맞는 UIDynamicItemBehavior 객체를 생성하여, UIDynamicAnimator 인스턴스에 추가해주면 된다. 
뷰들의 초기 상태가 결정되고 나면 애니메이터가 자동으로 각 뷰들이 받는 힘을 계산하여 매 순간의 뷰의 위치를 알려주고, 이들을 모두 포함하는 부모 뷰에서는 그 결과에 따라 하위 뷰들을 애니메이트 한다.

#ViewController Transition 

view는 animation이지만, VC는 Transition이라고 한다.

scene간 넘어갈 때 세그웨이로 연결해서 설정하고 있었던 것을 transition delegate라는 것을 사용하여 지정하고, Animation을 사용하여 나만의 값들로 (national geographic와 같은 앱으로)커스텀 하여 바꿀 수 있다.


[ 참고 문서 ]
1. https://m.blog.naver.com/PostView.nhn?blogId=pkw00&logNo=220172108593&proxyReferer=https%3A%2F%2Fwww.google.com%2F
2. https://soooprmx.com/archives/6994